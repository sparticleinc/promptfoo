(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[958],{9179:function(e,t,s){Promise.resolve().then(s.bind(s,4260))},2810:function(e,t,s){"use strict";let n,i;async function r(){if(n||(i||(i=fetch("/api/config").then(e=>e.json()).then(e=>n=e.apiBaseUrl)),await i),void 0===n)throw Error("API base URL is undefined");return n}s.d(t,{b:function(){return r}})},4260:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var n=s(7437),i=s(2265),r=s(1396),l=s.n(r),c=s(6507),a=s(2492),d=s(3701),o=s(9279),h=s(666),u=s(6988),p=s(4147),x=s(5781),j=s(8276),v=s(4033),m=s(8339),Z=s(5551),f=s(9394),w=s(2834),C=s(6337),y=s(1797),g=s(3226),I=s(5446);function k(e){var t,s,r,c;let{openDialog:x,handleClose:j,testCase:v}=e,[k,P]=(0,i.useState)(1);return(0,n.jsxs)(f.Z,{open:x,onClose:j,fullWidth:!0,maxWidth:"lg",children:[(0,n.jsxs)(y.Z,{children:["Dataset ",v.id.slice(0,6)]}),(0,n.jsxs)(C.Z,{children:[(0,n.jsx)(g.Z,{variant:"h6",style:{marginTop:"1rem"},children:"Test cases"}),(0,n.jsx)(I.u,{readOnly:!0,value:v&&m.default.dump(v.testCases),style:{width:"100%",padding:"0.75rem"},maxRows:15}),(0,n.jsx)(g.Z,{variant:"h6",style:{marginTop:"1rem"},children:"Used in..."}),(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(u.Z,{children:(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(h.Z,{children:"Eval ID"}),(0,n.jsx)(h.Z,{children:"Prompt ID"}),(0,n.jsx)(h.Z,{children:"Raw score"}),(0,n.jsx)(h.Z,{children:"Pass rate"}),(0,n.jsx)(h.Z,{children:"Pass count"}),(0,n.jsx)(h.Z,{children:"Fail count"}),(0,n.jsx)(h.Z,{children:"Prompt"})]})}),(0,n.jsx)(o.Z,{children:null==v?void 0:null===(t=v.prompts)||void 0===t?void 0:t.slice((k-1)*10,10*k).sort((e,t)=>t.evalId.localeCompare(e.evalId)).map((e,t)=>{var s,i,a,d,o;return(0,n.jsxs)(p.Z,{hover:!0,children:[(0,n.jsx)(h.Z,{children:(0,n.jsx)(l(),{href:"/eval/?evalId=".concat(e.evalId),children:e.evalId})}),(0,n.jsx)(h.Z,{style:{minWidth:"8em"},children:(0,n.jsx)(l(),{href:"/prompts/?id=".concat(e.id),children:e.id.slice(0,6)})}),(0,n.jsx)(h.Z,{children:"number"==typeof(null===(s=e.prompt.metrics)||void 0===s?void 0:s.score)?e.prompt.metrics.score.toFixed(2):"-"}),(0,n.jsx)(h.Z,{children:"number"==typeof(null===(i=e.prompt.metrics)||void 0===i?void 0:i.testPassCount)&&"number"==typeof(null===(a=e.prompt.metrics)||void 0===a?void 0:a.testFailCount)&&e.prompt.metrics.testPassCount+e.prompt.metrics.testFailCount>0?(e.prompt.metrics.testPassCount/(e.prompt.metrics.testPassCount+e.prompt.metrics.testFailCount)*100).toFixed(2)+"%":"-"}),(0,n.jsx)(h.Z,{children:null!==(r=null===(d=e.prompt.metrics)||void 0===d?void 0:d.testPassCount)&&void 0!==r?r:"-"}),(0,n.jsx)(h.Z,{children:null!==(c=null===(o=e.prompt.metrics)||void 0===o?void 0:o.testFailCount)&&void 0!==c?c:"-"}),(0,n.jsx)(h.Z,{children:e.prompt.raw.length>250?e.prompt.raw.slice(0,250)+"...":e.prompt.raw})]},t)})})]}),Math.ceil(((null==v?void 0:null===(s=v.prompts)||void 0===s?void 0:s.length)||0)/10)>1&&(0,n.jsx)(a.Z,{count:Math.ceil(v.prompts.length/10),page:k,onChange:(e,t)=>{P(t)}})]}),(0,n.jsx)(w.Z,{children:(0,n.jsx)(Z.Z,{onClick:j,children:"Close"})})]})}var P=s(2810);function S(){let e=(0,v.useSearchParams)(),[t,s]=(0,i.useState)([]),[r,m]=(0,i.useState)("date"),[Z,f]=(0,i.useState)("desc"),[w,C]=(0,i.useState)(1),[y,g]=(0,i.useState)(10),[I,S]=(0,i.useState)(!1),[b,E]=(0,i.useState)(0),D=e=>{let t=r===e&&"asc"===Z?"desc":"asc";m(e),f(t)};(0,i.useEffect)(()=>{(async()=>{fetch("".concat(await (0,P.b)(),"/api/datasets")).then(e=>e.json()).then(e=>{let t=[...e.data].sort((e,t)=>null===r?0:"asc"===Z?e[r]>t[r]?1:-1:e[r]<t[r]?1:-1);s(t)})})()},[r,Z,w,y]),(0,i.useEffect)(()=>{let s=null==e?void 0:e.get("id");if(s){let e=t.findIndex(e=>e.id.startsWith(s));-1!==e&&F(e)}},[t,e]);let F=e=>{E(e),S(!0)};return(0,n.jsxs)(c.Z,{paddingX:2,children:[(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(u.Z,{children:(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(h.Z,{style:{width:"10%"},children:"ID"}),(0,n.jsx)(h.Z,{style:{width:"20%"},children:(0,n.jsx)(x.Z,{active:"raw"===r,direction:"raw"===r?Z:"asc",onClick:()=>D("raw"),children:"Info"})}),(0,n.jsx)(h.Z,{style:{width:"20%"},children:"Variables"}),(0,n.jsx)(h.Z,{style:{width:"10%"},children:(0,n.jsx)(x.Z,{active:"count"===r,direction:"count"===r?Z:"asc",onClick:()=>D("count"),children:"Total # evals"})}),(0,n.jsx)(h.Z,{style:{width:"20%"},children:(0,n.jsx)(j.Z,{title:"The date of the most recent eval for this set of test cases",children:(0,n.jsx)(x.Z,{active:"date"===r,direction:"date"===r?Z:"asc",onClick:()=>D("date"),children:"Most recent eval date"})})}),(0,n.jsx)(h.Z,{style:{width:"20%"},children:(0,n.jsx)(j.Z,{title:"The ID of the most recent eval for this set of test cases",children:(0,n.jsx)(x.Z,{active:"evalId"===r,direction:"evalId"===r?Z:"asc",onClick:()=>D("evalId"),children:"Most recent eval ID"})})})]})}),(0,n.jsx)(o.Z,{children:t.slice((w-1)*y,w*y).map((e,t)=>(0,n.jsxs)(p.Z,{hover:!0,onClick:()=>F(t),style:{cursor:"pointer"},children:[(0,n.jsx)(h.Z,{children:e.id.slice(0,6)}),(0,n.jsxs)(h.Z,{style:{width:"20%",whiteSpace:"pre-wrap"},children:[e.testCases.length," test cases"]}),(0,n.jsx)(h.Z,{style:{width:"20%",whiteSpace:"pre-wrap"},children:(()=>{if(!Array.isArray(e.testCases)||"string"==typeof e.testCases[0])return"";let t=(e.testCases||[]).flatMap(e=>Object.keys(e.vars||{})),s=Array.from(new Set(t));return s.length>0?s.join(", "):"None"})()}),(0,n.jsx)(h.Z,{style:{width:"10%"},children:e.count}),(0,n.jsx)(h.Z,{style:{width:"20%"},children:e.recentEvalDate||"Unknown"}),(0,n.jsx)(h.Z,{style:{width:"20%"},children:e.recentEvalId?(0,n.jsx)(l(),{href:"/eval?evalId=".concat(e.recentEvalId),children:e.recentEvalId}):"Unknown"})]},t))})]}),Math.ceil(t.length/y)>1&&(0,n.jsx)(a.Z,{count:Math.ceil(t.length/y),page:w,onChange:(e,t)=>C(t)}),t[b]&&(0,n.jsx)(k,{openDialog:I,handleClose:()=>{S(!1)},testCase:t[b]})]})}},4033:function(e,t,s){e.exports=s(8165)}},function(e){e.O(0,[547,602,67,493,339,21,971,596,744],function(){return e(e.s=9179)}),_N_E=e.O()}]);